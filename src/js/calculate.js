var  cardb =  {
  "carlist":
    [
            { "make":"Hyundai", "models":"Accent", "year":"2006", "option":"1.5 CRDi turbo 5-speed M/T", "fuel":"14.3" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2007", "option":"1.5 CRDi turbo 5-speed M/T", "fuel":"14.3" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2008", "option":"1.5 CRDi turbo 5-speed M/T", "fuel":"14.3" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2009", "option":"1.5 CRDi turbo 5-speed M/T", "fuel":"14.3" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2010", "option":"1.5 CRDi turbo 5-speed M/T", "fuel":"14.3" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2011", "option":"1.5 CRDi turbo 5-speed M/T", "fuel":"14.3" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2012", "option":"1.6 CRDi GL 6M/T (Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2012", "option":"1.6 CRDi GL 7A/T-DCT(Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2012", "option":"1.4 GL 6M/T", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2012", "option":"1.4 GL A/T-CVT", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2013", "option":"1.6 CRDi GL 6M/T (Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2013", "option":"1.6 CRDi GL 7A/T-DCT(Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2013", "option":"1.4 GL 6M/T", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2013", "option":"1.4 GL A/T-CVT", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2014", "option":"1.6 CRDi GL 6M/T (Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2014", "option":"1.6 CRDi GL 7A/T-DCT(Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2014", "option":"1.4 GL 6M/T", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2014", "option":"1.4 GL A/T-CVT", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2015", "option":"1.6 CRDi GL 6M/T (Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2015", "option":"1.6 CRDi GL 7A/T-DCT(Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2015", "option":"1.4 GL 6M/T", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2015", "option":"1.4 GL A/T-CVT", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2016", "option":"1.6 CRDi GL 6M/T (Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2016", "option":"1.6 CRDi GL 7A/T-DCT(Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2016", "option":"1.4 GL 6M/T", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2016", "option":"1.4 GL A/T-CVT", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2017", "option":"1.6 CRDi GL 6M/T (Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2017", "option":"1.6 CRDi GL 7A/T-DCT(Dsl)", "fuel":"16.7" , "fueltype":"Diesel" },
            { "make":"Hyundai", "models":"Accent", "year":"2017", "option":"1.4 GL 6M/T", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Accent", "year":"2017", "option":"1.4 GL A/T-CVT", "fuel":"13.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Eon", "year":"2012", "option":"0.8L M/T", "fuel":"20.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Eon", "year":"2013", "option":"0.8L M/T", "fuel":"20.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Eon", "year":"2014", "option":"0.8L M/T", "fuel":"20.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Eon", "year":"2015", "option":"0.8L M/T", "fuel":"20.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Eon", "year":"2016", "option":"0.8L M/T", "fuel":"20.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Eon", "year":"2017", "option":"0.8L M/T", "fuel":"20.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2007", "option":"1.1L M/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2007", "option":"1.1L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2008", "option":"1.1L M/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2008", "option":"1.1L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2009", "option":"1.1L M/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2009", "option":"1.1L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2010", "option":"1.1L M/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2010", "option":"1.1L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2011", "option":"1.1L M/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2011", "option":"1.1L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2012", "option":"1.1L M/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2012", "option":"1.1L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"i10", "year":"2013", "option":"1.2L A/T", "fuel":"17.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2011", "option":"1.6L A/T", "fuel":"12.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2011", "option":"1.6L M/T", "fuel":"12.8" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2012", "option":"1.6L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2012", "option":"1.6L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2012", "option":"1.8L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2012", "option":"1.8L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2013", "option":"1.6L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2013", "option":"1.6L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2013", "option":"1.8L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2013", "option":"1.8L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2014", "option":"1.6L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2014", "option":"1.6L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2014", "option":"1.8L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2014", "option":"1.8L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2015", "option":"1.6L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2015", "option":"1.6L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2015", "option":"1.8L A/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2015", "option":"1.8L M/T", "fuel":"12.6" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2016", "option":"2.0 GLS 6A/T", "fuel":"12.81" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2016", "option":"1.6 GL 6A/T", "fuel":"11.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2016", "option":"1.6 GL 6M/T", "fuel":"11.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2017", "option":"2.0 GLS 6A/T", "fuel":"12.81" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2017", "option":"1.6 GL 6A/T", "fuel":"11.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Elantra", "year":"2017", "option":"1.6 GL 6M/T", "fuel":"11.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2010", "option":"2.4L 6A/T", "fuel":"10.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2011", "option":"2.4L 6A/T", "fuel":"10.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2012", "option":"2.4L 6A/T", "fuel":"10.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2013", "option":"2.4L 6A/T", "fuel":"10.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2014", "option":"2.4L 6A/T", "fuel":"10.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2015", "option":"2.4L 6A/T", "fuel":"10.2" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2016", "option":"1.6L Turbocharge 6A/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2016", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2016", "option":"1.6L Turbocharge 6A/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2016", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2017", "option":"1.6L Turbocharge 6A/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2017", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2017", "option":"1.6L Turbocharge 6A/T", "fuel":"12.3" , "fueltype":"Gas" },
            { "make":"Hyundai", "models":"Sonata", "year":"2017", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Gas" },
            //sample data below
            { "make":"Toyota", "models":"Unknown", "year":"2016", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Diesel" },
            { "make":"Toyota", "models":"Unknown2", "year":"2016", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Diesel" },
            { "make":"Toyota", "models":"Unknown23", "year":"2016", "option":"1.6L Turbocharge 6M/T", "fuel":"12.3" , "fueltype":"Diesel" },
            { "make":"Mazda", "models":"Mazda 3", "year":"2016", "option":"2.0L SKYACTIV®-MT1 6-speed overdrive", "fuel":"15.73", "fueltype":"Gas" },
            { "make":"Mazda", "models":"Mazda 3", "year":"2016", "option":"2.0L SKYACTIV®-DRIVE1 6-speed automatic ", "fuel":"15.73", "fueltype":"Gas" },
            { "make":"Mazda", "models":"Mazda 3", "year":"2016", "option":"2.5L SKYACTIV®-MT1 6-speed overdrive", "fuel":"14.46", "fueltype":"Gas" },
            { "make":"Mazda", "models":"Mazda 3", "year":"2016", "option":"2.5L SKYACTIV®-DRIVE1 6-speed automatic ", "fuel":"14.46", "fueltype":"Gas" },
            { "make":"Lamborghini", "models":"Aventador", "year":"2017", "option":"6.0L V12", "fuel":"6.3", "fueltype":"Premium Gas"}
    ]
}

console.log("---Test Code Start---")

$.ajax({
  url: 'https://raw.githubusercontent.com/zoiii/zoiii.github.io/master/client/data/skills.json',
  method: 'GET',
  dataType: 'json',
  success: function (data) {
    console.log(data)
  }
})
  
console.log("---Test Code End---")


var DieselPrice = 36.75;
var GasPrice = 46.60;
var PremiumGasPrice = 48.95;



var lookup = {};
var carlist = cardb.carlist;
var vehmaker = [];
for (var item, i = 0; item = carlist[i++];) {
  var make = item.make;
  if (!(make in lookup)) {
    lookup[make] = 1;
    vehmaker.push(make);
  }
}
 	  //Maker
        select = document.getElementById('vehmk');
        for (i = 0; i < vehmaker.length; i++){
        var opt = document.createElement('option');
            opt.value = vehmaker[i];
            opt.innerHTML = vehmaker[i];
            select.appendChild(opt);
        }
      
    //Model
    function vehmkonselect(){
      document.getElementById("vehmd").disabled = false;
      document.getElementById("vehyr").disabled = true;
      document.getElementById("vehopt").disabled = true;
      document.getElementById("form1nextbtn").disabled = true;
      document.getElementById("vehmd").options.length = 1;
      document.getElementById("vehyr").options.length = 1;
      document.getElementById("vehopt").options.length = 1;
      var make = document.getElementById("vehmk").value;
      
      var vehmodel = [];
      var lookup = {};
      for (var item, i = 0; item = carlist[i++];) {
        var models = item.models;
        if(item.make==make){
          if (!(models in lookup)) {
            lookup[models] = 1;
            vehmodel.push(models)
          }
        }
      }
      //list all models by brand
      select = document.getElementById('vehmd');
      for (i = 0; i < vehmodel.length; i++){
        var opt = document.createElement('option');
        opt.value = vehmodel[i];
        opt.innerHTML = vehmodel[i];
        select.appendChild(opt);
      }
      cardesc('Your Car is: ',make,'', '','');
    }

    
    //Year
    function vehmdonselect(){
      document.getElementById("vehyr").disabled = false;
      document.getElementById("vehopt").disabled = true;
      document.getElementById("form1nextbtn").disabled = true;
      document.getElementById("vehyr").options.length = 1;
      document.getElementById("vehopt").options.length = 1;
      var make = document.getElementById("vehmk").value;
      var model = document.getElementById("vehmd").value;
      
      var vehyear = [];
      var lookup = {};
      for (var item, i = 0; item = carlist[i++];) {
        var year = item.year;
        if(item.make==make && item.models==model){
          if (!(year in lookup)) {
            lookup[year] = 1;
            vehyear.push(year)
          }
        }
      }
      vehyear.sort();
      vehyear.reverse();
      select = document.getElementById('vehyr');
      for (i = 0; i < vehyear.length; i++){
        var opt = document.createElement('option');
        opt.value = vehyear[i];
        opt.innerHTML = vehyear[i];
        select.appendChild(opt);
      }
      cardesc('Your Car is: ',make,model, '','');
    }
    
    //Option
    function vehyronselect(){
      document.getElementById("vehopt").disabled = false;
      document.getElementById("form1nextbtn").disabled = true;
      document.getElementById("vehopt").options.length = 1;
      var make = document.getElementById("vehmk").value;
      var model = document.getElementById("vehmd").value;
      var year = document.getElementById("vehyr").value;
      var Present = new Date().getFullYear();
      
      var vehoption = [];
      var lookup = {};
      for (var item, i = 0; item = carlist[i++];) {
        var option = item.option;
        if(item.make==make && item.models==model && item.year==year){
          if (!(option in lookup)) {
            lookup[option] = 1;
            vehoption.push(option)
          }
        }
      }
      select = document.getElementById('vehopt');
      for (i = 0; i < vehoption.length; i++){
      var opt = document.createElement('option');
          opt.value = vehoption[i];
          opt.innerHTML = vehoption[i];
          select.appendChild(opt);
      }
      cardesc('Your Car is: ', year,make, model,'');
    }

    function vehoptonselect(){
      var year = document.getElementById("vehyr").value;
      var make = document.getElementById("vehmk").value;
      var model = document.getElementById("vehmd").value;
      var option = document.getElementById("vehopt").value;
      document.getElementById("form1nextbtn").disabled = false;
      cardesc('Your Car is: ', year,make, model, option);
      for (var item, i = 0; item = carlist[i++];) {
        if(item.make==make && item.models==model && item.year==year && item.option==option){
          document.getElementById("KMpL").value = item.fuel;
          switch(item.fueltype){
            case "Diesel":
              document.getElementById("fuelprice").value = DieselPrice;
              document.getElementById("gasmenu").hidden = true;
              break;
            case "Gas":
              document.getElementById("fuelprice").value = GasPrice;
              document.getElementById("gasmenu").hidden = false;
              document.getElementById("gasmenu").innerHTML = "Unleaded";
              break;
            case "Premium Gas":
              document.getElementById("fuelprice").value = PremiumGasPrice;
              document.getElementById("gasmenu").hidden = false;
              document.getElementById("gasmenu").innerHTML = "Premium";
              break;
            default:
              document.getElementById("fuelprice").value = "";
              break;
          }
        }
      }
    }
    
    
    function gas(value, name){
      document.getElementById("fuelprice").value = value;
      document.getElementById("gasmenu").innerHTML = name;
    }
    
    function cardesc(title, txtyr, txtmk, txtmd, txtopt){
      document.getElementById("Result").innerHTML=title+txtyr+" "+txtmk+" "+txtmd+" "+txtopt;
      document.getElementById("Result2").innerHTML=title+txtyr+" "+txtmk+" "+txtmd+" "+txtopt;
      document.getElementById("Result3").innerHTML=" "+txtyr+" "+txtmk+" "+txtmd+" "+txtopt;
    }
    
    function form1script(){
      document.getElementById("form1").hidden = true;
      document.getElementById("calcuresult").hidden = true;
      document.getElementById("form2").hidden = false;
      initMap();
    }
    function form2script(){
      document.getElementById("form1").hidden = false;
      document.getElementById("form2").hidden = true;
      document.getElementById("selectcar").reset();
      document.getElementById("origin-input").value = "";
      document.getElementById("destination-input").value = "";
      document.getElementById("vehmd").disabled = true;
      document.getElementById("vehyr").disabled = true;
      document.getElementById("vehopt").disabled = true;
      document.getElementById("form1nextbtn").disabled = true;
      document.getElementById("calcuresult").hidden = false;
      cardesc('Select Your Car:','','','','');
    }
    
   function calculate(){
        document.getElementById("loader2").hidden=false;
        //Find the distance
        var distanceService = new google.maps.DistanceMatrixService();
         distanceService.getDistanceMatrix({
            origins: [$("#origin-input").val()],
            destinations: [$("#destination-input").val()],
            travelMode: google.maps.TravelMode.DRIVING,
            unitSystem: google.maps.UnitSystem.METRIC,
            durationInTraffic: true,
            avoidHighways: false,
            avoidTolls: false
        },
        function (response, status) {
            if (status !== google.maps.DistanceMatrixStatus.OK) {
            } else {
              var calcdistance  = response.rows[0].elements[0].distance.text;
              var calcduration  = response.rows[0].elements[0].duration.text;
              document.getElementById("totalFuelConsumption").innerHTML = "Total Fuel Consumption: "+((response.rows[0].elements[0].distance.value/1000)/document.getElementById("KMpL").value).toFixed(2)+" Liters";
              document.getElementById("totalDistance").innerHTML = "Total Distance: "+calcdistance;
              document.getElementById("travelDuration").innerHTML = "Travel Duration: "+calcduration;
              document.getElementById("totalCostOut").innerHTML = "₱ "+(((response.rows[0].elements[0].distance.value/1000)/document.getElementById("KMpL").value)*document.getElementById("fuelprice").value).toFixed(2);
              document.getElementById("loader2").hidden=true;
              document.getElementById("calcuresult").hidden = false;
            }
        });
        
   }
   
 //------------------------------------ Google Map -----------------------------------------
 function geoFindMe() {
  var output = document.getElementById("out");

  if (!navigator.geolocation){
    output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
    return;
  }

  function success(position) {
    var latitude  = position.coords.latitude;
    var longitude = position.coords.longitude;

    output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';
  }

  function error() {
    output.innerHTML = "Unable to retrieve your location";
  }

  output.innerHTML = "<p>Locating…</p>";

  navigator.geolocation.getCurrentPosition(success, error);
}
//----------Geolocation - DevTool Problem ^^^^^^^ ------------------------------------------

  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      mapTypeControl: false,
      center: {lat: 12.879721, lng: 121.7740},
      zoom: 5
    });

    new AutocompleteDirectionsHandler(map);
  }
  function AutocompleteDirectionsHandler(map) {
    this.map = map;
    this.originPlaceId = null;
    this.destinationPlaceId = null;
    this.travelMode = 'DRIVING';
    var originInput = document.getElementById('origin-input');
    var destinationInput = document.getElementById('destination-input');
    var modeSelector = document.getElementById('mode-selector');
    this.directionsService = new google.maps.DirectionsService;
    this.directionsDisplay = new google.maps.DirectionsRenderer;
    this.directionsDisplay.setMap(map);

    var originAutocomplete = new google.maps.places.Autocomplete(
        originInput, {placeIdOnly: true});
    var destinationAutocomplete = new google.maps.places.Autocomplete(
        destinationInput, {placeIdOnly: true});

    this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
    this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');
    
  }
  
  AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(autocomplete, mode) {
    var me = this;
    autocomplete.bindTo('bounds', this.map);
    autocomplete.addListener('place_changed', function() {
      var place = autocomplete.getPlace();
      if (!place.place_id) {
        window.alert("Please select an option from the dropdown list.");
        return;
      }
      if (mode === 'ORIG') {
        me.originPlaceId = place.place_id;
      } else {
        me.destinationPlaceId = place.place_id;
      }
      document.getElementById("calcuresult").hidden = true;
      me.route()
    });
  };

  AutocompleteDirectionsHandler.prototype.route = function() {
    if (!this.originPlaceId || !this.destinationPlaceId) {
      return;
    }
    var me = this;
    this.directionsService.route({
      origin: {'placeId': this.originPlaceId},
      destination: {'placeId': this.destinationPlaceId},
      travelMode: this.travelMode
    }, function(response, status) {
      if (status === 'OK') {
        me.directionsDisplay.setDirections(response);
        document.getElementById("calcbtn").disabled = false;
      } else {
        window.alert('Directions request failed due to ' + status);
      }
    });
    
  };
  
  document.getElementById("loader").hidden=true;
  document.getElementById("selectcar").hidden=false;